# SysArmor Vector ETL 环境配置

# === 基础配置 ===
VECTOR_LOG=info
RUST_LOG=info
VECTOR_THREADS=2
VECTOR_REQUIRE_HEALTHY=false

# === API 配置 ===
VECTOR_API_PORT=8686

# === 管道配置 ===
VECTOR_CONFIG_PATH=/etc/vector/pipelines/default.toml

# === 数据源配置 ===
# NATS 配置
NATS_URL=nats://localhost:4222
NATS_SUBJECT_PREFIX=events.sysdig
NATS_ML_SUBJECT_PREFIX=ml.nodlink

# 文件数据源配置
DATA_FILE_PATH=/data/events.jsonl

# Syslog 配置
SYSLOG_ADDRESS=0.0.0.0:6000
SYSLOG_MODE=tcp
SYSLOG_PORT=6000

# Kafka 配置
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_TOPIC=audit-logs

# 端口配置
METRICS_PORT=9090

# 调试配置
DEBUG_MODE=false

# === 输出目标配置 ===
# OpenSearch 配置
OPENSEARCH_URL=http://localhost:9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=admin
OPENSEARCH_INDEX_PREFIX=sysarmor-events

# Elasticsearch 配置
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=changeme
ELASTICSEARCH_INDEX_PREFIX=sysarmor-events

# ML 推理服务配置
ML_INFERENCE_URL=http://localhost:8000
ML_INFERENCE_ENDPOINT=/predict/batch

# === 处理配置 ===
# 批处理配置
BATCH_MAX_EVENTS=100
BATCH_TIMEOUT_SECS=10

# 缓冲配置
BUFFER_MAX_EVENTS=10000
BUFFER_WHEN_FULL=block

# 重试配置
RETRY_ATTEMPTS=3
RETRY_MAX_DURATION_SECS=300

# === 监控配置 ===
# 健康检查配置
HEALTHCHECK_ENABLED=true
HEALTHCHECK_INTERVAL=30s

# 指标配置
METRICS_ENABLED=true
METRICS_PORT=9598

# === 调试配置 ===
# 调试模式
DEBUG_MODE=false
VERBOSE_LOGGING=false

# 测试配置
TEST_MODE=false
TEST_DATA_PATH=/data/test-events.jsonl
